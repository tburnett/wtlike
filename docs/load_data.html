---

title: Load data

keywords: fastai
sidebar: home_sidebar

summary: "Prepare photons and exposure, given a source "
description: "Prepare photons and exposure, given a source "
nb_path: "nbs/04_load_data.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/04_load_data.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>This module defines the function <a href="/wtlikeload_data#load_source_data"><code>load_source_data</code></a>.</p>
<p>Depends on module Exposure for SC data</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="ProcessWeek" class="doc_header"><code>class</code> <code>ProcessWeek</code><a href="https://github.com/tburnett/wtlike/tree/master/wtlike/load_data.py#L83" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>ProcessWeek</code>(<strong><code>config</code></strong>, <strong><code>source</code></strong>, <strong><code>week_file</code></strong>)</p>
</blockquote>
<p>Process a week</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="get_week_files" class="doc_header"><code>get_week_files</code><a href="https://github.com/tburnett/wtlike/tree/master/wtlike/load_data.py#L166" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>get_week_files</code>(<strong><code>config</code></strong>, <strong><code>week_range</code></strong>=<em><code>None</code></em>)</p>
</blockquote>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="load_source_data" class="doc_header"><code>load_source_data</code><a href="https://github.com/tburnett/wtlike/tree/master/wtlike/load_data.py#L193" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>load_source_data</code>(<strong><code>config</code></strong>, <strong><code>source</code></strong>, <strong><code>week_range</code></strong>=<em><code>None</code></em>, <strong><code>key</code></strong>=<em><code>''</code></em>, <strong><code>clear</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>This is a client of SourceData.</p>
<ul>
<li>week_range [None] -- if None, select all weeks</li>
<li>key ['']   -- key to use for cache, construct from name if not set</li>
<li>clear [False]</li>
</ul>
<p>Returns a tuple of</p>
<ul>
<li>photons</li>
<li>exposure</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Develop-incremental-update,-using-weeks">Develop incremental update, using weeks<a class="anchor-link" href="#Develop-incremental-update,-using-weeks"> </a></h3><p>Also try multiprocessing</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># config = Config(use_kerr=True)</span>
<span class="c1"># from wtlike.sources import PointSource</span>
<span class="c1"># week_range = (9,9)</span>
<span class="c1"># source = PointSource(&#39;Geminga&#39;)</span>
<span class="c1"># config.verbose=2</span>
<span class="c1"># !date</span>
<span class="c1"># pp,ee = get_week_data(config, source, week_range)</span>
<span class="c1"># #!date</span>

<span class="c1"># ee[0].head()</span>

<span class="c1"># ee[0].exp.values.round()</span>

<span class="c1"># load_source_data(config, source, week_range=(9,9))[1].head()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Test-with-a-Geminga-week">Test with a Geminga week<a class="anchor-link" href="#Test-with-a-Geminga-week"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="bp">self</span><span class="o">.</span><span class="n">sc_df</span><span class="o">.</span><span class="n">head</span><span class="p">(),</span> <span class="bp">self</span><span class="o">.</span><span class="n">sc_df</span><span class="o">.</span><span class="n">exp</span><span class="o">.</span><span class="n">describe</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(        start      stop  livetime  cos_theta        exp
 138  59270.09  59270.09     27.63       0.40   31210.91
 139  59270.09  59270.10     27.66       0.50   52301.33
 140  59270.10  59270.10     27.66       0.59   73006.13
 141  59270.10  59270.10     27.63       0.67   91013.83
 142  59270.10  59270.10     27.62       0.75  106996.72,
 count      4213.00
 mean     100933.99
 std       34813.26
 min        8946.47
 25%       71947.11
 50%      108820.09
 75%      132400.75
 max      150696.35
 Name: exp, dtype: float64)</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

