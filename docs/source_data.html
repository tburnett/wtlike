---

title: Source Data management

keywords: fastai
sidebar: home_sidebar

summary: "Extract data for a source"
description: "Extract data for a source"
nb_path: "nbs/03_source_data.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/03_source_data.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Overview">Overview<a class="anchor-link" href="#Overview"> </a></h3><p>Given a point source, the class <a href="/wtlikesource_data#SourceData"><code>SourceData</code></a> manages all data-oriented operations, providing all that is necessary to create a set of cells. It depends on the modules</p>
<ul>
<li><p><a href="/wtlikeconfig"><code>config</code></a> 
  This must set up the paths to the data created by <a href="/wtlikedata_man"><code>data_man</code></a>, and define paths for the effective area and weight files</p>
</li>
<li><p>effective_area</p>
</li>
<li>weights</li>
</ul>
<p>It implements <code>binned_exposure</code></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Check-exposure-with-last-data-file">Check exposure with last data file<a class="anchor-link" href="#Check-exposure-with-last-data-file"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">z</span> <span class="o">=</span> <span class="p">[]</span>
<span class="k">for</span> <span class="n">f</span> <span class="ow">in</span> <span class="n">ff</span><span class="p">:</span>
    <span class="k">with</span> <span class="nb">open</span><span class="p">(</span><span class="n">f</span><span class="p">,</span> <span class="s1">&#39;rb&#39;</span><span class="p">)</span> <span class="k">as</span> <span class="n">inp</span><span class="p">:</span>
        <span class="n">week</span> <span class="o">=</span> <span class="n">pickle</span><span class="o">.</span><span class="n">load</span><span class="p">(</span><span class="n">inp</span><span class="p">)</span>
        <span class="n">wk</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">f</span><span class="o">.</span><span class="n">name</span><span class="p">[</span><span class="o">-</span><span class="mi">7</span><span class="p">:</span><span class="o">-</span><span class="mi">4</span><span class="p">])</span>
        <span class="n">wk_start</span> <span class="o">=</span> <span class="n">week</span><span class="p">[</span><span class="s1">&#39;tstart&#39;</span><span class="p">]</span><span class="o">/</span><span class="p">(</span><span class="mi">7</span><span class="o">*</span><span class="mi">24</span><span class="o">*</span><span class="mi">3600</span><span class="p">)</span><span class="o">-</span><span class="mf">386.44</span>
        <span class="n">z</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">([</span><span class="n">wk</span><span class="p">,</span> <span class="n">wk_start</span><span class="p">]))</span>

<span class="n">z</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">array</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
<span class="n">z</span><span class="p">[</span><span class="mi">0</span><span class="p">],</span> <span class="n">z</span><span class="p">[</span><span class="o">-</span><span class="mi">1</span><span class="p">]</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>(array([9.        , 9.65361276]), array([673.        , 672.99321925]))</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">plt</span><span class="o">.</span><span class="n">plot</span><span class="p">(</span><span class="n">z</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="n">z</span><span class="p">[:,</span><span class="mi">1</span><span class="p">]</span><span class="o">-</span><span class="n">z</span><span class="p">[:,</span><span class="mi">0</span><span class="p">],</span> <span class="s1">&#39;.&#39;</span><span class="p">);</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="test-photon-data">test photon data<a class="anchor-link" href="#test-photon-data"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="time_bin_edges" class="doc_header"><code>time_bin_edges</code><a href="https://github.com/tburnett/wtlike/tree/master/wtlike/source_data.py#L181" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>time_bin_edges</code>(<strong><code>config</code></strong>, <strong><code>exposure</code></strong>, <strong><code>tbin</code></strong>=<em><code>(0, 0, 1)</code></em>)</p>
</blockquote>
<p>Return an array of equally-spaced edges</p>
<p>tbin: an array (a,b,d), default config.time_bins</p>
<p>interpretation of a, b:</p>

<pre><code>if &gt; 5000, interpret as MJD
if &lt;0, back from stop
otherwise, offset from start</code></pre>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">exposure</span> <span class="o">=</span> <span class="n">e_df</span>
<span class="nb">print</span><span class="p">(</span><span class="n">time_bin_edges</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">exposure</span><span class="p">))</span>
<span class="nb">print</span><span class="p">(</span><span class="n">time_bin_edges</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">exposure</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mf">0.5</span><span class="p">))</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">time_bin_edges</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">exposure</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">2</span><span class="p">))</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">time_bin_edges</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">exposure</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">,</span><span class="mf">0.25</span><span class="p">))</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">time_bin_edges</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">exposure</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mi">5</span><span class="p">,</span><span class="o">-</span><span class="mi">4</span><span class="p">,</span><span class="mf">0.25</span><span class="p">))</span> <span class="p">)</span>   
<span class="nb">print</span><span class="p">(</span><span class="n">time_bin_edges</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">exposure</span><span class="p">,</span> <span class="p">(</span><span class="mi">59326</span><span class="p">,</span> <span class="mi">59330</span><span class="p">,</span><span class="mf">0.5</span><span class="p">))</span> <span class="p">)</span>    
 
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>[59326. 59327. 59328. 59329. 59330. 59331. 59332. 59333.]
[59326.  59326.5 59327.  59327.5 59328.  59328.5 59329.  59329.5 59330.
 59330.5 59331.  59331.5 59332.  59332.5 59333. ]
[59328. 59330. 59332.]
[59326.   59326.25 59326.5  59326.75 59327.  ]
[59328.   59328.25 59328.5  59328.75 59329.  ]
[59326.  59326.5 59327.  59327.5 59328.  59328.5 59329.  59329.5 59330. ]
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="SourceData" class="doc_header"><code>class</code> <code>SourceData</code><a href="https://github.com/tburnett/wtlike/tree/master/wtlike/source_data.py#L269" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>SourceData</code>(<strong><code>config</code></strong>, <strong><code>source</code></strong>, <strong><code>clear</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>Load the photon data near the source and associated exposure.</p>
<p>Either from:</p>
<ol>
<li><code>config.data_folder</code>, the Path to folder with list of pickle files with weekly or monthly data</li>
<li>the cache, with key <code>{source.name}_data</code></li>
</ol>
<ul>
<li><a href="/wtlikeconfig"><code>config</code></a> : basic configuration: expect <code>config.data_folder</code> to be set</li>
<li><code>source</code> : PointSource object</li>
<li><code>clear</code> : if set, overwrite the cached results</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Test-a-single-week">Test a single week<a class="anchor-link" href="#Test-a-single-week"> </a></h2>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># sd2 = SourceData(config2, source, clear=True); </span>
<span class="c1"># sd2.plot()</span>
</pre></div>

    </div>
</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Test-extracting-full-dataset">Test extracting full dataset<a class="anchor-link" href="#Test-extracting-full-dataset"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Development of code to summarize cos theta</p>

</div>
</div>
</div>
</div>
 

