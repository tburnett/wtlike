---

title: Source Data management

keywords: fastai
sidebar: home_sidebar

summary: "Extract data for a source"
description: "Extract data for a source"
nb_path: "nbs/03_source_data.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/03_source_data.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Overview">Overview<a class="anchor-link" href="#Overview"> </a></h3><p>Given a point source, the class <a href="/wtlikesource_data#SourceData"><code>SourceData</code></a> manages all data-oriented operations, providing all that is necessary to create a set of cells. It depends on the modules</p>
<ul>
<li><p><a href="/wtlikeconfig"><code>config</code></a> 
  This must set up the paths to the data created by <a href="/wtlikedata_man"><code>data_man</code></a>, and define paths for the effective area and weight files</p>
</li>
<li><p>effective_area</p>
</li>
<li>weights</li>
</ul>
<p>It implements <a href="/wtlikesource_data#binned_exposure"><code>binned_exposure</code></a></p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Check-exposure-with-last-data-file">Check exposure with last data file<a class="anchor-link" href="#Check-exposure-with-last-data-file"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="test-photon-data">test photon data<a class="anchor-link" href="#test-photon-data"> </a></h3>
</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="contiguous_bins" class="doc_header"><code>contiguous_bins</code><a href="https://github.com/tburnett/wtlike/tree/master/wtlike/source_data.py#L161" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>contiguous_bins</code>(<strong><code>exposure</code></strong>, <strong><code>min_gap</code></strong>=<em><code>20</code></em>, <strong><code>min_duration</code></strong>=<em><code>600</code></em>)</p>
</blockquote>
<p>return a dataframe with start and stop columns that
denote contiguous intervals</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="time_bin_edges" class="doc_header"><code>time_bin_edges</code><a href="https://github.com/tburnett/wtlike/tree/master/wtlike/source_data.py#L199" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>time_bin_edges</code>(<strong><code>config</code></strong>, <strong><code>exposure</code></strong>, <strong><code>tbin</code></strong>=<em><code>None</code></em>)</p>
</blockquote>
<p>Return an interleaved array of start/stop values</p>
<p>tbin: an array (a,b,d), default config.time_bins</p>
<p>interpretation of a, b:</p>

<pre><code>if &gt; 5000, interpret as MJD
if &lt;0, back from stop
otherwise, offset from start

</code></pre>
<p>d : if positive, the day bin size
    if 0; return contiguous bins</p>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">exposure</span> <span class="o">=</span> <span class="n">e_df</span>
<span class="nb">print</span><span class="p">(</span><span class="n">time_bin_edges</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">exposure</span><span class="p">,</span> <span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">1</span><span class="p">))</span> <span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">time_bin_edges</span><span class="p">(</span><span class="n">config</span><span class="p">,</span> <span class="n">exposure</span><span class="p">,</span> <span class="p">(</span><span class="o">-</span><span class="mi">1</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)))</span>
<span class="c1"># print(time_bin_edges(config, exposure, (0,0,0.5)) )</span>
<span class="c1"># print(time_bin_edges(config, exposure, (-5,0,2)) )</span>
<span class="c1"># print(time_bin_edges(config, exposure, (0,1,0.25)) )</span>
<span class="c1"># print(time_bin_edges(config, exposure, (-5,-4,0.25)) )   </span>
<span class="c1"># print(time_bin_edges(config, exposure, (59326, 59330,0.5)) )    </span>
 
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">

<div class="output_subarea output_stream output_stdout output_text">
<pre>[59326. 59327. 59327. 59328. 59328. 59329. 59329. 59330. 59330. 59331.
 59331. 59332. 59332. 59333.]
[59332.00012481 59332.01193037 59332.05607389 59332.07829611
 59332.12209241 59332.14431463 59332.1881225  59332.21034472
 59332.25414102 59332.26951701 59332.32034472 59332.33641516
 59332.38652528 59332.40414666 59332.45241648 59332.47200555
 59332.51860861 59332.53991055 59332.58459241 59332.60681463
 59332.65076139 59332.67298361 59332.71684935 59332.73907157
 59332.78291417 59332.80513639 59332.84908315 59332.87130537
 59332.91497435 59332.93719657 59332.98138639 59332.98653421]
</pre>
</div>
</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">keep</span> <span class="o">=</span> <span class="n">contiguous_bins</span><span class="p">(</span><span class="n">exposure</span><span class="p">)</span>
<span class="n">gstart</span><span class="p">,</span> <span class="n">gstop</span> <span class="o">=</span> <span class="n">keep</span><span class="p">[</span><span class="mi">0</span><span class="p">::</span><span class="mi">2</span><span class="p">],</span> <span class="n">keep</span><span class="p">[</span><span class="mi">1</span><span class="p">::</span><span class="mi">2</span><span class="p">]</span>
<span class="n">df</span> <span class="o">=</span>  <span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="o">.</span><span class="n">from_dict</span><span class="p">(</span><span class="nb">dict</span><span class="p">(</span><span class="n">start</span><span class="o">=</span><span class="n">gstart</span><span class="p">,</span> <span class="n">stop</span><span class="o">=</span><span class="n">gstop</span><span class="p">))</span>

<span class="c1"># add column with duration in sec</span>
<span class="n">df</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span><span class="s1">&#39;duration&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">(</span><span class="n">df</span><span class="o">.</span><span class="n">stop</span><span class="o">-</span><span class="n">df</span><span class="o">.</span><span class="n">start</span><span class="p">)</span><span class="o">*</span><span class="mi">24</span><span class="o">*</span><span class="mi">3600</span>

<span class="n">df</span><span class="o">.</span><span class="n">hist</span><span class="p">(</span><span class="s1">&#39;duration&#39;</span><span class="p">,</span> <span class="n">bins</span><span class="o">=</span><span class="n">np</span><span class="o">.</span><span class="n">linspace</span><span class="p">(</span><span class="mi">0</span><span class="p">,</span><span class="mf">4e3</span><span class="p">,</span><span class="mi">131</span><span class="p">));</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_png output_subarea ">
<img src="data:image/png;base64,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
"
>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h4 id="binned_exposure" class="doc_header"><code>binned_exposure</code><a href="https://github.com/tburnett/wtlike/tree/master/wtlike/source_data.py#L247" class="source_link" style="float:right">[source]</a></h4><blockquote><p><code>binned_exposure</code>(<strong><code>config</code></strong>, <strong><code>exposure</code></strong>, <strong><code>time_edges</code></strong>)</p>
</blockquote>
<p>Bin the exposure</p>
<ul>
<li>time_bins: list of edges, as an interleaved start/stop array</li>
</ul>
<p>returns tuple with</p>
<ul>
<li>bexp: array of exposure integrated over each time bin, normalized to total
  if interleaved, client must apply [0::2] selection.</li>
<li>expbin total exposure</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

<div class="output_wrapper">
<div class="output">

<div class="output_area">


<div class="output_markdown rendered_html output_subarea ">
<h2 id="SourceData" class="doc_header"><code>class</code> <code>SourceData</code><a href="https://github.com/tburnett/wtlike/tree/master/wtlike/source_data.py#L336" class="source_link" style="float:right">[source]</a></h2><blockquote><p><code>SourceData</code>(<strong><code>source_name</code></strong>, <strong><code>config</code></strong>=<em><code>None</code></em>, <strong><code>source</code></strong>=<em><code>None</code></em>, <strong><code>clear</code></strong>=<em><code>False</code></em>)</p>
</blockquote>
<p>Load the photon data near the source and associated exposure.</p>
<p>Either from:</p>
<ol>
<li><code>config.wtlike_data/'data_files'</code>, the Path to folder with list of pickle files with weekly or monthly data</li>
<li>the cache, with key <code>{source.name}_data</code></li>
</ol>
<ul>
<li>source_name : if specified, create a PointSource object</li>
<li><a href="/wtlikeconfig"><code>config</code></a> : basic configuration</li>
<li><code>source</code> : PointSource object if specified</li>
<li><code>clear</code> : if set, overwrite the cached results</li>
</ul>

</div>

</div>

</div>
</div>

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Test-extracting-full-dataset">Test extracting full dataset<a class="anchor-link" href="#Test-extracting-full-dataset"> </a></h2>
</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>Development of code to summarize cos theta</p>

</div>
</div>
</div>
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sd</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>SourceData: Source Geminga with:
	 data:     1,211,364 photons from   2008-08-04 to 2021-04-28
	 exposure: 3,112,161 intervals from 2008-08-04 to 2021-04-28</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">
<div class="input">

<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="n">sd</span><span class="o">.</span><span class="n">exptot</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">

<div class="output_area">



<div class="output_text output_subarea output_execute_result">
<pre>267362561238.10257</pre>
</div>

</div>

</div>
</div>

</div>
    {% endraw %}

</div>
 

