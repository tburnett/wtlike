---

title: The `wtlike` package

keywords: fastai
sidebar: home_sidebar

summary: "Code for generating fermi-LAT light curves."
description: "Code for generating fermi-LAT light curves."
nb_path: "nbs/index.ipynb"
---
<!--

#################################################
### THIS FILE WAS AUTOGENERATED! DO NOT EDIT! ###
#################################################
# file to edit: nbs/index.ipynb
# command to build the docs after a change: nbdev_build_docs

-->

<div class="container" id="notebook-container">
        
    {% raw %}
    
<div class="cell border-box-sizing code_cell rendered">

</div>
    {% endraw %}

<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="GitHub-Links">GitHub Links<a class="anchor-link" href="#GitHub-Links"> </a></h3><ul>
<li><a href="https://tburnett.github.io/wtlike/">this document</a></li>
<li><a href="https://github.com/tburnett/wtlike">repository</a></li>
</ul>
<h2 id="Context">Context<a class="anchor-link" href="#Context"> </a></h2><p>This package has code that was adapted to the <a href="https://nbdev.fast.ai/">nbdev</a> code/tests/documentation environment from the <a href="https://github.com/tburnett/lat-timing">github package lat-timing</a> to manage light curves of Fermi-LAT sources.<br>
It is based on a <a href="https://arxiv.org/pdf/1910.00140.pdf">paper</a> by Matthew Kerr, which derives the <a href="/loglike.html#The-Kerr-likelihood-formula">weighted likelihood formalism</a> used here, specifically with
the <a href="https://arxiv.org/pdf/1207.5578.pdf">Bayesian Block</a> to detect and characterize variability of a gamma-ray source.</p>
<p>Also, I've ported some code from  my <a href="https://github.com/tburnett/jupydoc">jupydoc</a> documentation package supporting enhanced documentation combining Markdown and code, such that the 
Markdown reflects execution of the code.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Installation">Installation<a class="anchor-link" href="#Installation"> </a></h2><p>Currently in pre-alpha, and must be cloned. This brings up the <code>nbdev</code> stuff as well.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing text_cell rendered"><div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Module-summary">Module summary<a class="anchor-link" href="#Module-summary"> </a></h2><h3 id="Primary-ingredients:">Primary ingredients:<a class="anchor-link" href="#Primary-ingredients:"> </a></h3><ul>
<li><p><strong>Photon data</strong>: time, energy, and position. This is managed as a <a href="https://parquet.apache.org/">Parquet</a> database, derived from the public <em>Fermi</em>-LAT data. Modules are <a href="/photon_data"><code>photon_data</code></a> and <a href="/data_man"><code>data_man</code></a>.</p>
</li>
<li><p><strong>Exposure</strong>: Need to normalize expected rates as a function of time, position, and energy. Modules: <a href="/exposure"><code>exposure</code></a>, <a href="/effective_area"><code>effective_area</code></a>, and <code>gti</code>.</p>
</li>
<li><p><strong>Weights</strong>: for each photon, this is the probability that it was from a specific source. This requires an analysis of all the souces in the region about the source, involving <code>gtlike</code> or <code>pointlike</code>. Module <a href="/weights"><code>weights</code></a> finds the data for a the source, and adds it to the photon list.</p>
</li>
</ul>
<h3 id="The-light-curve">The light-curve<a class="anchor-link" href="#The-light-curve"> </a></h3><p>The module <a href="/cells"><code>cells</code></a> creates a list of "cells", time intervals with a list of the photon weights, and an estimation from the exposure about the expected distribution. 
Each cell is fit using the modules <a href="/loglike"><code>loglike</code></a> and <a href="/poisson"><code>poisson</code></a>.
Finally, <a href="/lightcurve"><code>lightcurve</code></a> makes a list of the fits.</p>
<h3 id="Simulation">Simulation<a class="anchor-link" href="#Simulation"> </a></h3><p>A light curve can be also generated with a simulation, see <a href="/simulation"><code>simulation</code></a>.</p>
<h3 id="Bayesian-Blocks">Bayesian Blocks<a class="anchor-link" href="#Bayesian-Blocks"> </a></h3><p>The <a href="/bayesian"><code>bayesian</code></a> module creates a partition, and refits the blocks.</p>

</div>
</div>
</div>
</div>
 

